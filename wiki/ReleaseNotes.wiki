#labels Featured
=== Next release (trunk) ===

  * fix issue 258: The IText files causes NullPointerException in FlyingSaucer

=== 1.41.0 ===

  * issue 244 and issue 245 were Resin issues when using javamelody and they are fixed in [http://caucho.com/resin-4.0/changes/changes.xtp#4031Sep122012 Resin v4.0.31]
  * fix issue 252: Add XSS protection
  * fix issue 255: exception while collecting data java.io.FileNotFoundException: Could not open ....rrd [non existent]
  * fix issue 248: JsfActionListener sends two requests when javamelody is disabled
  * enhanced the display of the list of applications in the optional collector server, when there are more than 10 applications (revision 3047)
  * added: allow extend servlet security check (issue 256)

=== 1.40.0 ===

  * Upgrade xstream to 1.4.2 in the optional collect server, and in the [https://plugins.atlassian.com/plugins/net.bull.javamelody JIRA/Confluence/Bamboo plugin].
  * fix issue 231: In [https://plugins.atlassian.com/plugins/net.bull.javamelody JIRA/Confluence/Bamboo plugin], incompatibility with Bamboo remote agents.
  * fix issue 233: The monitoring reports should not set autoCommit(false) on JDBC connections obtained from datasources.
  * fix issue 243: Spring config files may trigger internet access
  * fix [https://issues.jenkins-ci.org/browse/JENKINS-14050 Jenkins issue 14050] also for the /nodes reports in the [https://wiki.jenkins-ci.org/display/JENKINS/Monitoring Jenkins monitoring plugin]. 
  * added in the external API: XML and JSON exports of MBeans, and of JNDI tree given a JNDI context path. Documentation is [ExternalAPI#XML here]. For example: [http://demo.javamelody.cloudbees.net/monitoring?format=xml&part=mbeans MBeans] and [http://demo.javamelody.cloudbees.net/monitoring?format=json&part=jndi&path=comp JNDI].
  * added: The new parameter {{{gzip-compression-disabled}}} makes possible to disable the compression of the monitoring reports, for example if there is another mechanism which would compress a second time (false by default: the reports are compressed by default if the browser supports it). Documented with the other optional parameters in the [UserGuide#6._Optional_parameters user guide].

=== 1.39.0 ===

  * fix [https://issues.jenkins-ci.org/browse/JENKINS-14050 Jenkins issue 14050], and also when security is enabled in Jenkins: Unreadable HTML response for the monitoring reports in the [https://wiki.jenkins-ci.org/display/JENKINS/Monitoring Jenkins monitoring plugin]. Compression of the monitoring reports is now disabled in the plugin and the reports will be compressed by Jenkins starting with v1.470.
  * fix issue 230: NoClassDefFoundError: javax/servlet/AsyncContext in Tomcat 5.5

=== 1.38.0 ===

  * fix [https://issues.jenkins-ci.org/browse/JENKINS-14050 Jenkins issue 14050], but only when security is not enabled in Jenkins: Unreadable HTML response for the monitoring reports in the [https://wiki.jenkins-ci.org/display/JENKINS/Monitoring Jenkins monitoring plugin]
  * fix major issue 138: It is now possible to monitor SQL requests and jdbc connections with a JNDI DataSource in GlassFish v3, (thanks to _Pieter_ for the analysis and to _Bhun Kho_ for the initial workaround). This can work with whatever version of JavaMelody from 1.23 to the latest. Documentation is [UserGuideAdvanced#Monitoring_of_sql_requests_and_of_jdbc_connections_in_v3+ here]
  * fix issue 229: In Glassfish v2.1.1, Exception in NamingManagerImpl copyMutableObject() for a JNDI DataSource
  * fix issue 217: AsyncContext.getResponse().getWriter() throws IllegalStateException "getOutputStream() has already been called for this response" in Tomcat
  * fix issue 198: In [https://plugins.atlassian.com/plugins/net.bull.javamelody JIRA/Confluence/Bamboo plugin], monitoring of http sessions was not working after a few minutes or a few hours with JIRA 4.4 or Confluence 4.1
  * fix minor issue 210: In [https://plugins.atlassian.com/plugins/net.bull.javamelody JIRA/Confluence/Bamboo plugin] with a JIRA server, there was sometimes an error in log about "jira-web-item".
  * In JIRA 5.0, changing the dbconfig.xml with a JdbcDriver does not work anymore to monitor jdbc connections and SQL requests: the [UserGuide#Atlassian_JIRA,_Confluence_and_Bamboo_Plugin user guide] has been updated to use a datasource from jndi instead (issue 225).
  * added: When using the [UserGuideAdvanced#Optional_centralization_server_setup optional collect server], enable use of http Basic authentication to secure access to the monitored webapp, for example when the ip-address of the collect server is not known upfront (issue 214, thanks to _purnhar_). Documentation is [UserGuideAdvanced#5._Security_with_a_collect_server here].
  * added: When using the [UserGuideAdvanced#Optional_centralization_server_setup optional collect server], the size of the stream, between the monitored webapp and the collect server, is now written in the log of the collect server for each call. (Note that the stream is compressed if more than 50 KB ; when compressed, the log gives the compressed size. revision 2828)

=== 1.37.0 ===

  * fix issue 207: Incompatibility with servlet api 2.4 (Tomcat 5.5) in javamelody 1.36.0
  * fix issue 205 and issue 206: delegate the JSF ActionListener to the next JSF ActionListener if one was defined in the faces-config.xml file (thanks to _Patrick Dobler_)
  * fix: the SpringDataSourceBeanPostProcessor now implements PriorityOrdered to be initialized sooner (revision 2724)
  * fix issue 187: can't protect Melody grails plugin with spring security core (thanks to _Burt Beckwith_)
  * fix ~~[http://jira.grails.org/browse/GPMELODY-4 GPMELODY-4]~~: Load the Melody grails plugin after shiro (thanks to _Tomas Lin_).
  * added: Display the properties of the new [http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html Tomcat jdbc] datasources in System informations like for Tomcat DBCP, in particular display the max number of active connections next to the current number of active connections (issue 29).
  * added: Reduce the possibility of storage overload by deleting automatically the obsolete RRD files (which were not updated for the last 3 months), and which were for requests which do not exist anymore (revision 2750 and r2753). Note: the size of existing RRD files is fixed for ever and old .ser.gz files are already automatically deleted after a year.
  * added: Display the disk usage of the storage at the bottom of the report (revision 2761)

=== 1.36.0 ===

<a href='http://www.cloudbees.com/'><img src='http://javamelody.googlecode.com/svn/trunk/javamelody-core/src/site/resources/images/Button-Built-on-CB-1.png' width='20%' alt='Built on CloudBees' /></a>Thanks to [http://www.cloudbees.com CloudBees], there is now a public [http://jenkins-ci.org Jenkins] *Continuous Integration* server for the JavaMelody project:
	
	Anytime, you can download the latest *[https://javamelody.ci.cloudbees.com/job/javamelody/ nightly build]* (beta, snapshot from trunk). You can also browse the latest [https://javamelody.ci.cloudbees.com/job/javamelody/site/apidocs/index.html javadoc], [https://javamelody.ci.cloudbees.com/job/javamelody/site/xref/index.html sources] and other [https://javamelody.ci.cloudbees.com/job/javamelody/ reports]. There is also a [https://javamelody.ci.cloudbees.com/job/jenkins%20plugin/ continuous integration] for the [https://wiki.jenkins-ci.org/display/JENKINS/Monitoring Jenkins Monitoring plugin].

	And there is a public *demo of JavaMelody*. It is based on the latest source in trunk and is continuously deployed with DEV@CLOUD. It features http (GWT), services (java interfaces) and SQL (jdbc, Mysql) monitoring in particular.
  * First, you can play with this quick and dirty [http://demo.javamelody.cloudbees.net/ GWT application] to have some data (thanks Benjamin)
  * Then you can view the charts and the statistics in the [http://demo.javamelody.cloudbees.net/monitoring monitoring reports] (no password)
  * Some JavaMelody features are not in the demo, see the [Screenshots] for other features.

	Other notes:
  * fix blocking issue 194 and issue 143, issue 199, issue 200: The jrobin v1.5.9 artifacts are now available in the *Maven central* repository as you can see [http://search.maven.org/#artifactdetails|org.jrobin|jrobin|1.5.9|jar here]. The external (and currently unreachable) repository in the pom is now useless and removed.
  * fix minor issue 192: In a Bamboo server v3.1+, internal server error when viewed by non-admin user.
  * fix issue 193: Make "Deployment on Tomcat without modification of monitored webapps" work like before v1.32
  * fix issue 189: Should not set autoCommit to false on datasource connections
  * fix issue 195: In the database reports, compatibility of "innodb status" with both Mysql 5.5 and Mysql 4
  * fix issue 201: Unable to render MBeans tree when some JMX-retrieval exception occurs
  * fix issue 204: There should not be any blocking exception when initializing the JSF action listener
  * added: monitoring-spring-datasource.xml, as an alternative to monitoring-spring.xml, to monitor only the datasources when there is some conflict (issue 172). See [UserGuide#7._JDBC doc] at the end of the JDBC chapter.
  * added: Possibility to customize styles, icons and other resources in the html reports (issue 196). See [UserGuideAdvanced#Customizing_styles,_icons_and_other_resources_in_the_html_report doc] in the advanced user guide. Please submit your best [http://code.google.com/p/javamelody/source/browse/trunk/javamelody-core/src/main/resources/net/bull/javamelody/resource/monitoring.css CSS file] to the [http://groups.google.com/group/javamelody users' group].
  * added: if there are deadlocked threads in the JVM, print a warning message with the names of the deadlocked threads at the top of threads dump, like in the html and pdf reports (revision 2678)

=== 1.35.0 ===

  * fix issue 185: In [https://plugins.atlassian.com/plugins/net.bull.javamelody JIRA/Confluence/Bamboo plugin], fix the compatibility of checking the admin permission with Confluence 4.1.4 and after.
  * fix: In the plugin managers of JIRA/Confluence/Bamboo, display the correct version of the plugin (revision 2530)
  * fix issue 178: In the [https://wiki.jenkins-ci.org/display/JENKINS/Monitoring Jenkins/Hudson plugin] and in [https://plugins.atlassian.com/plugins/net.bull.javamelody JIRA/Confluence/Bamboo plugin], since v1.32, "Nb of http sessions" is 0 and "View http sessions" is always empty.
  * fix [https://groups.google.com/group/javamelody/browse_thread/thread/aa7198fab0ccbd51 JNDI error] in the vFabric server (revision 2540)
  * added: In the [https://wiki.jenkins-ci.org/display/JENKINS/Monitoring Jenkins/Hudson plugin], new graphic of "Build queue length" in the monitoring of nodes, next to the graphic of "Running builds" (revision 2515, done in Jenkins Hackathon, with help from Kohsuke Kawaguchi)
  * added: some "database reports" for *DB2*, in the "System information" part: MON_CURRENT_SQL, MON_DB_SUMMARY, MON_LOCKWAITS, MON_SERVICE_SUBCLASS_SUMMARY, MON_CURRENT_UOW, MON_WORKLOAD_SUMMARY, MON_GET_CONNECTION and fix of SNAPSHOT_DYN_SQL (issue 179, thanks to _Peter James and his DBA from humanservices.gov.au_)
  * added: optional parameter (dns-lookups-disabled) to allow disabling of dns lookups with InetAddress.getLocalHost() to prevent long hangs on startup/shutdown in some particular environments (issue 181, thanks to _r6squeegee_)
  * added: In the [http://www.grails.org/plugin/grails-melody Grails Melody plugin], read the configuration parameters from both Config.groovy and GrailsMelodyConfig.groovy (issue 180, thanks to _padcom_)
  * added: possibility to customize "name" in the statistics (long standing issue 31). Note that instance creation (such as String concatenation) must be reduced to the minimum, otherwise there will be a performance overhead. It is really not recommended to customize.

=== 1.34.0 ===

  * fix issue 121 and issue 175: Incompatibility with *Quartz 2* (thanks to _rogerc at costumercentrix.com_)
  * fix issue 164: *JBoss 7* support for SQL monitoring with JNDI datasource (thanks to _sarnowski at new-thoughts.org_)
  * fix issue 166: jboss-as-client and javamelody log4j conflict (java.lang.IncompatibleClassChangeError)
  * fix issue 170: Plugin for JIRA / Confluence / Bamboo: Compatibility with JIRA 5.0 RC
  * fix: if the http request contains for example ";jsessionid=1234567890ABCDEF", when the browser does not accept cookies, then that part is automatically ignored for the statistics (revision 2363)
  * fix fonts in the PDF reports for Chinese people, when the first PDF report was made for non Chinese people (revision 2441)
  * added: graphic over time of the "*Transactions per minute*" in "Other charts" of the reports. This graphic is similar to "Http hits per minute" and to "Sql hits per minute", but for database(s) transactions (more precisely, for the number of opened jdbc connections per minute). The values in this graphic are typically about one tenth of the values in "Sql hits per minute", depending on the mean number of sql requests per transaction in the monitored application (revision 2467).

=== Maven central repository ===

*The latest release of javamelody artifacts are now available in the Maven central repository*: [http://search.maven.org/#search|ga|1|a%3A%22javamelody-core%22 javamelody-core in central] . And so, you don't need anymore to use in your pom.xml or settings.xml the [http://maven.glassfish.org] repository for javamelody.

(In fact, it seems that some obsolete artefacts of javamelody were recently published by Sonatype in Maven central from an old java.net repository. Seeing that, I published the latest javamelody artefacts in Maven central.)

=== 1.33.0 ===

  * fix issue 146 and issue 153: Incorrect Struts statistics when two actions have the same name but are in different packages. Note: the consequence is that the names of all the Struts actions are changed in the statistics.
  * fix issue 152: Error with execution plan for "ALTER SESSION..."
  * fix issue 157: In the Grails plugin, do not add groovy meta programming on services if javamelody is disabled. ([http://svn.codehaus.org/grails-plugins/grails-grails-melody/trunk/GrailsMelodyGrailsPlugin.groovy rev 76158])
  * fix ~~[https://issues.jenkins-ci.org/browse/JENKINS-11293 Jenkins issue  11293]~~: Monitoring plugin not installed because of NoClassDefFoundError: org.slf4j.ILoggerFactory on IBM J9 JVM ([https://svn.jenkins-ci.org/trunk/hudson/plugins/monitoring/pom.xml rev 40073])
  * fix: When using the collect server and if Oracle database, display the execution plan in the detail of a sql request like when the collect server is not used (revision 2305).
  * fix issue 160: Disabling sql statistics with the "displayed-counters" parameter should not disable the connection monitoring
  * added for issue 158: note in the UI and in the online help to say that since ehcache v2.1, the cache statistics need to be enabled in order to display efficiency values
  * added: *JSF actions* statistics like for Struts 2 actions. If the application to monitor contains some JSF actions based on Mojarra (JSF Reference Implementation), a counter is automatically created for statistics of execution of actions. A JSF ActionListener is automatically added for the JSF application and you don't need to do anything to have JSF statistics.

=== 1.32.1 ===
  * fix issue 151: a Java 1.6 dependency was introduced in 1.32.0 (NoSuchFieldError: ROOT)

=== 1.32.0 ===
  * *Major change: System actions are now enabled by default*, including in the centralized collect server, because they are useful. If you want to disable them, as it was before by default, then you can add a system-actions-enabled parameter with value false: see the user guide or add a system property -Djavamelody.system-actions-enabled=false (revision 2202).
  * fix issue 137: MonitoringInterceptor when Stateful EJB, Java EE 6
  * fix issue 141: exception while collecting data java.io.IOException: Read failed, file xyz not mapped for I/O (after out of disk space)
  * fix issue 147: When the monitoring filter is incorrectly defined in web.xml for recent appserver, parameters inside filter are sometimes ignored
  * fix: In the collector server, refuse to add twice one instance of an application (for example, individually and then in a cluster), because it would not work (revision 2157).
  * added: Chinese translation, and fix display of Chinese characters in the JRobin graphics and in the PDF reports (issue 150)
  * added: Action "Generate a heap dump" added for IBM JDK like for Oracle JDK, patch by _David Karlsen_ in the [http://groups.google.com/group/javamelody/browse_thread/thread/49787fb45384b915 users' group] (revision 2180)
  * added: Add link "Dump threads as text" below the list of threads (revision 2163 and revision 2196)
  * added: Provide an url to test sending a pdf report by mail (issue 145)

=== 1.31.0 ===
  * fix issue 128: Fix the shutdown process in JIRA 4.3.4 and clean it for Confluence/Bamboo/Jenkins/Hudson.
  * fix issue 129: ArrayIndexOutOfBoundsException in GWTRequestWrapper in a particular case.
  * fix issue 134: In JBoss, sending mails with weekly report should not need jboss-web.xml
  * issue 133: [UserGuideAdvanced#Usage_of_in_JBoss_AS_7_%28which_uses_OSGI%29 Documentation] added on OSGI configuration when using JBoss AS 7
  * To display the username in the list of http sessions, look at ACEGI_SECURITY_LAST_USERNAME and SPRING_SECURITY_LAST_USERNAME if getRemoteUser() was null (In particular, for Jenkins/Hudson. Revision 2003).

  * The JRobin dependency is now available in the maven glassfish repository as JavaMelody: [http://maven.glassfish.org/content/groups/public/org/jrobin/jrobin/1.5.9/]. So it is not necessary to add the jrobin repository or the jrobin dependency in your pom.xml. The jrobin dependency is included transitively with javamelody-core. Reference: [UserGuide#Dependencies]

=== 1.30.0 ===

  * fix issue 116: MBeans overview does not work with java 1.5
  * fix issue 117: Sorting of numbers is based on String comparison in German
  * fix issue 122: Average number of requests per minutes seems to be wrong, with a single day in a custom period
  * fix issue 124: Start date removed from the text at the top of the monitoring page, except if the "All" period is selected.

=== 1.29.0 ===

  * fix issue 106: a few HTTP hits are lost in the statistics for the first hit(s) on new requests (no impact on statistics once requests are known)
  * fix issue 104: support SQL monitoring in Apache OpenEJB bundled as TomEE
  * fix issue 107: Hibernate factory doesn't work with HSQL with batching turned off
  * fix issue 108: {{{async-supported}}} added in the web-fragment.xml file to support asynchronous requests in Tomcat 7.0.
  * added: PDF report for the "Summary by class"

=== 1.28.0 ===

  * fix issue 99: NullPointerException when displaying the list of process on AIX
  * fix issue 101: In the collector server, can't add an application when the applications.properties file does not exist
  * fix issue 102: In the collector server, NoClassDefFoundError when IBM's JVM is used
  * fix issue 105: Monitoring JNDI DataSource in Tomcat fails under host name other than "localhost"
  * added: Alternative in order to use AspectJ in Spring using [http://code.google.com/p/javamelody/source/browse/trunk/javamelody-core/src/main/resources/net/bull/javamelody/monitoring-spring-aspectj.xml net/bull/javamelody/monitoring-spring-aspectj.xml], in case that proxies don't work ([UserGuide#9._Business_facades_(if_Spring) documentation], thanks to [http://touk.pl/blog/2011/03/07/javamelody-spring-and-aspectj/ _Witek Wołejszo_])

=== 1.27.0 ===

  * fix issue 97: StackOverflowError in JBoss 4 when using JNDI dataSources with several monitored webapps (fix verified by _Saurabh Arora_).
  * grammar fixes in English user guides and online help by _Stéphanie Bourbon_
  * added: pdf report of "Runtime dependencies" for EJB3/Spring/Guice/Services (needs the iText jar dependency)
  * added: pdf report of MBeans (system actions must be [UserGuide#6._Optional_parameters enabled])
  * added: [http://code.google.com/p/javamelody/source/browse/trunk/javamelody-core/src/main/java/net/bull/javamelody/SpringDataSourceFactoryBean.java SpringDataSourceFactoryBean], as an alternative to excludedDatasources in [http://code.google.com/p/javamelody/source/browse/trunk/javamelody-core/src/main/java/net/bull/javamelody/SpringDataSourceBeanPostProcessor.java SpringDataSourceBeanPostProcessor], in order to define which datasources are monitored (issue 90, patch by _David Karlsen_)
  * [http://www.grails.org/plugin/grails-melody JavaMelody Grails Plugin]: use dependency resolution (issue 92).<br/>Dependencies of the plugin are now declared in [https://svn.codehaus.org/grails-plugins/grails-grails-melody/trunk/grails-app/conf/BuildConfig.groovy BuildConfig.groovy] instead of jar files in the plugin. As a consequence and starting from JavaMelody Grails plugin v1.2, a network connection will be needed the first time to download the dependencies with Ivy.

=== 1.26.0 ===

  * added: *GWT-RPC detailed statistic collection feature*, contributed by _dhartford_ (issue 88).<br/>Breaks up general servlet calls (GwtServiceServlet) into the specific GWT-RPC calls for statistic collection (GwtServiceServlet.LOGIN GWT-RPC, GwtServiceServlet.Data_retrieve_method GWT-RPC, GwtServiceServlet.update_data GWT-RPC, etc).<br/>Only enabled when GWT-RPC is detected (and 'http'). Works with GWT 1.3 to 2.1 (to date).  Will not work with deRPC/RequestFactory transport mechanisms, only GWT-RPC specifically.
  * added: *Portuguese Brazil translation*, including the online help, thanks to _Luiz Gonzaga da Mata_ and _Renan Oliveira da Cunha_. This translation is the default for all Portuguese people. The first language in the browser settings should be Portuguese (pt) or Portuguese/Brazil (pt-br) to use it. The [http://javamelody.googlecode.com/svn/trunk/javamelody-core/src/site/resources/Ajuda_on-line_do_monitoring.pdf online help in Portuguese Brazil] is also available.
  * fix issue 85: web-fragment schema location in *JBoss 6.0.0 CE*, patch contributed by _dhartford_
  * fix JNDI report in Glassfish, WebLogic, Jonas and Websphere
  * fix issue 89: Listing of MBeans fails in Jetty
  * added: If JBoss 5, display JBoss specific MBeans
  * Hudson/Jenkins Monitoring plugin:
    * fix [http://issues.jenkins-ci.org/browse/JENKINS-8344 Jenkins issue 8344] (ClassNotFoundException: net.bull.javamelody.SessionListener)
    * added: in the nodes report, chart of the number of the running builds by period

=== 1.25.0 ===

  * fix: When the spring context is initialized before the web filter of the monitoring and when "displayed-counters" is not used, the spring monitoring was not displayed (Pete in the users group).
  * fix some issues in the monitoring of Hudson nodes when the operating systems of the nodes are heterogeneous
  * fix issue 36: Grails Melody plugin blocks closure (fixed by _Jean Barmash_ and _Liu Chao_)
  * fix issue 79: Spring security core integration for the Grails Melody plugin (fixed by _Liu Chao_)
  * fix issue 80: Memory histogram should be supported on Mac OS X
  * fix issue 83: StringIndexOutOfBoundsException for caches with # in the name of a cache
  * added: graphic of the mean age of the currently valid http sessions (in minutes), displayed in the "Other charts"
  * added: if JRockit, display the JRockit specific MBeans
  * added: pdf reports of http sessions and of heap histogram
  * This time the artifacts are published in the usual maven repository.

=== 1.24.0 ===

  * fix issue 67: EhCache 1.4.x detection is not robust enough (NoClassDefFoundError)
  * fix issue 68: support more prefixes for JNDI names of datasources
  * fix issue 69: NullPointerException when getting resources if mime-type is null
  * fix issue 71: StringIndexOutOfBoundsException with # in JVM parameters
  * fix issue 73: / by zero when max_elements_in_memory = 0 in ehcache
  * fix issue 74: "View OS Processes" does not work on MAC OS X Server
  * fix issue 75: StringIndexOutOfBoundsException for http session with # in attributes
  * added: in the optional collect server, "add and remove applications" can be restricted (issue 61)
  * added an enhancement on jdbc proxy: Improve JDBC connection wrapper equals invocation when {{{args[0]}}} is a javamelody proxy (issue 78)

  * added: In the system actions, new view "*MBeans*" with the values and the descriptions of the attributes. (MBeans contain configuration and low-level data on the application server and on the JVM). The values are viewable but not writable and operations can not be performed.

  * added for *[http://munin.projects.linpro.no/ Munin]/[http://www.nagios.org/ Nagios]*: for each MBean attribute, a link on the left of the attribute is provided to have only the current value of an attribute in plain text. And a link below zoomed graphics is also provided to have only the last value in the graphic. For example, the following URLs can be used in this version: [http://localhost:8080/context/monitoring?part=lastValue&graph=usedMemory,cpu 1] and [http://localhost:8080/context/monitoring?jmxValue=Catalina:type=GlobalRequestProcessor,name=http-8080.bytesSent|java.lang:type=OperatingSystem.ProcessCpuTime 2]. (To use the url for a MBean value, the system actions must be [UserGuide#6._Optional_parameters enabled]).<br/>This feature can probably be used to write a Munin/Nagios plugin using something like [https://github.com/coderholic/munin-popularity-plugins this] in order to have in Munin the same graphics as in JavaMelody or to have some new graphics based on MBeans values.

  * added in the [http://wiki.hudson-ci.org/display/HUDSON/Monitoring Hudson Monitoring plugin]: *Monitoring of the Hudson nodes* (slaves in general) similar to the monitoring of the Hudson master.<br/>If the monitoring of the Hudson master is available at {{{http://localhost:8080/monitoring}}} then the monitoring of the Hudson nodes is available at {{{http://localhost:8080/monitoring/nodes}}}.<br/><br/>The monitoring of the Hudson nodes includes:
    * Aggregated "used memory" chart, aggregated "% cpu" chart (between 0 and 100) for day, week, month, year or a custom period.
    * Chart of the build times over time for the selected period
    * Other aggregated charts: % GC, threads count, loaded classes count, system load average, open file descriptors count and more for the selected period
    * Statistics of the build times for the selected period
    * Running builds with time elapsed
    * Threads informations for each node including name, state, stack-trace and an action to kill any thread
    * Heap histogram aggregated for all nodes
    * Current system informations for each node
    * MBeans for each node
    * Last values in charts and MBeans values like above. For example, the following URLs can be used: [http://localhost:8080/monitoring/nodes?part=lastValue&graph=usedMemory,cpu 1] and [http://localhost:8080/monitoring/nodes?jmxValue=java.lang:type=OperatingSystem.SystemLoadAverage|java.lang:type=OperatingSystem.ProcessCpuTime 2]
    * Process informations for each node
    * Actions to execute the GC or to generate a heap dump on each node

  * Due to the current infrastructure changes for the [https://maven2-repository.dev.java.net maven2-repository in java.net]:
    * The *Monitoring plugin 1.24.0 for Hudson* can be downloaded from http://javamelody.googlecode.com/files/monitoring.hpi<br/>You can submit this hpi file in the Advanced tab of the plugin manager in Hudson and restart the server.
    * The jar file *javamelody-core 1.24.0 is not published in any maven repository*.
    * A new release will probably be made when the [https://maven2-repository.dev.java.net maven2-repository] comes back.

=== 1.23.0 ===

  * fix issue 66: Since tomcat 6.0.21 and when tomcat based authentication is used, session count is false and there is a possible memory leak for invalidated http sessions. This is because of the changes for tomcat enhancement [https://issues.apache.org/bugzilla/show_bug.cgi?id=45255 45255]. To tomcat experts: Isn't an http session supposed to die first before being able to born a second time? (Update: see [https://issues.apache.org/bugzilla/show_bug.cgi?id=51042 51042])
  * minor change in the gzip compression of the reports in order to fix the compatibility issue between the javamelody grails plugin and the UiPerformance grails plugin.

  * The "Monitoring" plugin can be installed by point and click in the plugin manager of a Hudson server, or it can be downloaded from http://download.hudson-labs.org/plugins/monitoring/. The plugin manager says that it is built for Hudson 1.388, but in fact it works for older versions of Hudson.

=== 1.22.0 ===

  * fix issue 54: v1.21.0 requires jdk 1.6, when "displayed-counters" is used
  * fix issue 58: Quartz in Spring and server shutdown. (Added parameter "quartz-default-listener-disabled" to be used for Quartz jobs only when used in Spring. See [UserGuide#12._Batch_jobs_(if_Quartz) doc].) 
  * fix issue 59: Maximum values in statistics can be incorrect
  * fix issue 62: IndexOutOfBounds for report on some jobs
  * added major feature for *Hudson and Jira/Confluence/Bamboo plugins*: graphic of the number of sessions and details on http sessions with the link in "System informations" (this is [http://code.google.com/p/javamelody/source/browse/trunk/javamelody-core/src/main/java/net/bull/javamelody/PluginMonitoringFilter.java emulated] without httpsessionlistener, because httpsessionlistener can't be used in Hudson plugins or in Atlassian plugins)
  * added: @MonitoredWithSpring can be added on interfaces like on implementation classes. See [UserGuide#9._Business_facades_(if_Spring) doc].
  * added: the system property -Djavamelody.plugin-authentication-disabled=true can be added to a Hudson, JIRA, Confluence or Bamboo server in order to disable authentication of the monitoring page in the javamelody plugin and to be able to add the server to a centralized collect server. See [UserGuideAdvanced#4._Results_with_a_collect_server doc]. (A system property like -Djavamelody.allowed-addr-pattern=127\.0\.0\.1 can also be added with the ip address of the collect server)
  * removed: because parameters in environment variables can't work well in all OS, the possibility to use environment variables is removed. Use [UserGuide#6._Optional_parameters this] instead.

=== 1.21.0 ===

  * fix issue 48: Quartz errors for persistent jobs after jobs' classes are renamed or deleted
  * fix to display the list of http sessions when Tomcat throws an exception "Session already invalidated"
  * fix to display the list of process when using Windows in Germany
  * added: If Tomcat or JBoss, new graphics in "Other charts" for the number of active http and ajp threads in all the server, the number of bytes received per minute and the number of *bytes sent per minute* by the server (the number of bytes received is often 0 for most webapps).
  * New view with the *summary per class of statistics* for EJB/Spring/Guice/services with aggregation for methods and another view for the methods of the selected class.
  * enhanced [UserGuideAdvanced#2._Deployment_of_the_webapp_of_monitoring documentation] on the configuration of the optional centralization server such as to enable system actions or to send daily/weekly/monthly reports by mail.

=== Grails Plugin 0.5 ===

[http://www.grails.org/plugin/grails-melody JavaMelody Grails Plugin] 0.5 has been released.

  * includes JavaMelody 1.20.0
  * Grails version was updated to 1.2.4 in the plugin, only to be able to release the plugin
  * issue 36 is a known open issue for the plugin when a closure is used in a service (contribution welcome)

=== 1.20.0 ===

  * added: *German translation* thanks to _Ewald Arnold_. We would like to have [http://groups.google.fr/group/javamelody/browse_thread/thread/5656e63513436b64 feedback here].
  * added: Documentation on using JavaMelody with a *[UserGuide#Dependencies maven dependency]*
  * fix: In the html display of the *current requests*, put back the complete http request with query parameters and values, like it was displayed before v1.16.0
  * fix issue 45: *Optimization* of html rendering when there are thousands of threads or current requests: the threads are displayed in their own page when there are more than 500 threads, and the "current requests" are also displayed in their own page when there are more than 500 of them. If there are less than 500 threads or current requests, then nothing is changed in the reports.
  * Note that a webapp with JavaMelody has no problem with 7000 threads and 7000 active http requests ! and that html reports are already highly compressed in this case.
  * For the same optimization reason, when the optional [UserGuideAdvanced#Optional_centralization_server_setup centralized collect server] is used, the data from the monitored application to the collect server are now compressed when the size of the stream is larger than 50 KB (for example, when there are 7000 threads). This applies when the transport format is 'serialized' but also when it is 'xml' (or 'json').

=== 1.19.0 ===

  * fix issue 38: Distributed (XA) Transactions aborted by 'rollback' in JavaInformations.java
  * fix issue 41: NumberFormatException requesting process information
  * fix issue 44: Sql requests not monitored when using jdk1.6, a recent jdbc driver and net.bull.javamelody.JdbcDriver
  * added: *[UserGuideAdvanced#Alternative_for_monitoring_of_sql_requests Alternative for sql requests monitoring]* when jdbc datasource or jdbc driver can't be used and when Hibernate is used: HibernateBatcherFactory
  * *[UserGuideAdvanced#Debugging_logs Logs for debugging]* added using either logback if found, or log4j if found or java.util.logging, and using the category "net.bull.javamelody" and the level "debug". Moreover, existing stack-traces of exceptions are no longer printed in the error console of the server, and they are now logged in logback or log4j or java.util.logging, using the category "net.bull.javamelody" and the level "info" or "warn". Logging of http requests is unchanged.
  * added: Names of *[UserGuideAdvanced#Business_facades_%28without_EJB3_and_without_Spring_and_without_Gu MonitoringProxies]* can now be customized.
  * added: [UserGuide#6._Optional_parameters Documentation] on the javamelody parameter {{{no-database}}}
  * added: [UserGuideAdvanced#Report_written_before_last_shutdown Documentation] on the report written before the last shutdown

=== 1.18.0 ===

  * fix issue 33: Database name or jdbc driver with '#' causes IndexOutOfBounds
  * fix issue 34: Application server restart causes persistent Quartz jobs to be hanging around
  * added: "JNDI Tree" link in "system actions" (for example to check if a datasource is really in "java:/" or in "java:/comp/env/")
  * install note for bamboo 2.6: see end of issue 37

=== Grails Plugin 0.4 ===

[http://www.grails.org/plugin/grails-melody JavaMelody Grails Plugin] 0.4 has been released by _Liu Chao_.

  * includes JavaMelody 1.17.0, in particular for Quartz jobs

=== 1.17.0 ===

  * fix issue 28: NoSuchMethodError when undeployed and when JavaMelody 1.15.0 or 1.16.0 is used with Quartz 1.7 or 1.8
  * fix issue 30: Quartz job CRON expression with '#' causes NullPointerException
  * fix for Grails: an exception in initialisation of Quartz should not stop initialisation of the webapp
  * fix issue 8: A synchronized (rrdDb) was added against the exception "Bad sample timestamp x. Last update time was x, at least one second step is required". It was seen with deployment on Tomcat without modification of monitored webapps.
  * fix for JIRA: "mean sql hits" and "mean sql time" displayed in http and in jsp statistics
  * changed: The default order of MonitoringSpringAdvisor is now 0 for priority before other spring advisors (issue 32)
  * added: Statistics of *[http://struts.apache.org/ Struts 2]* actions
  * added: If Oracle database and if system actions are enabled, 3 new reports on foreign keys without indexes, invalid objets and disabled constraints

=== 1.16.0 ===

  * Compatibility of the [https://plugins.atlassian.com/plugin/details/20909 JIRA/Bamboo plugin] with *Confluence*
    * Notes: The "Monitoring" link is moved to the Administration menu and only administrators in JIRA/Bamboo/Confluence are authorized to view reports. Http sessions are unfortunately never seen by this plugin.
  * Monitoring of jdbc connections and of *sql requests in JIRA* (and in Confluence and Bamboo if a jdbc datasource is used and not a direct jdbc connection)
  * Fix issue 26: In JIRA, the count of used jdbc connections increases in the display with each "/monitoring" page refresh (but connections are really closed)
  * added: Monitoring of Business facades with *[http://code.google.com/p/google-guice/ Guice]* (like with EJB or with Spring)
  * Some minor bugs fixed

=== JavaMelody Grails Plugin 0.3 ===

[http://www.grails.org/plugin/grails-melody JavaMelody Grails Plugin] 0.3 has been released by _Liu Chao_.

  * fix issue 18: Grails-melody plugin breaks the filterpane plugin
  * includes JavaMelody 1.15.0

=== 1.15.1 of Hudson plugin and of JIRA/Bamboo plugin ===

  * *[https://plugins.atlassian.com/plugin/details/20909 JIRA/Bamboo plugin]*
    * fix issue 24: StackOverflow when a SSO plugin with seraph is used
    * jdbc connections and sql requests are now monitored in JIRA (like jsp pages)

  * *[http://wiki.hudson-ci.org/display/HUDSON/Monitoring Hudson plugin]*
    * change to reduce disk usage: Some common http requests are now aggregated in statistics, for example on build numbers. The javamelody.http-transform-pattern parameter has now the default value of {{{ "/\d+/|/site/.+|avadoc/.+|/ws/.+|obertura/.+|estReport/.+|iolations/file/.+|/user/.+|/static/\w+/" }}} and all matches in http URLs will be replaced by "$". Note that it is possible on each Hudson server to change the value of this parameter with a system property -Djavamelody.http-transform-pattern=xxx in the java command line.

=== 1.15.0 ===

  * fix issue 20: SQL requests were not monitored and "jdbc connections" were always 0, when *JndiObjectFactoryBean* is used in Spring
  * fix issue 21 for *JIRA*: Null pointer with quartz jobs in jira
  * fix issue 22 for *JIRA*: The report will be visible only for jira administrators
  * fix issue 23 for *JIRA*: The report displayed only random characters when gzip compression is enabled in jira
  * [UserGuide#10._Batch_jobs_(if_Quartz) doc updated] for *quartz* jobs scheduled with Spring, with help from _Pether Sörling_.
  * [UserGuide#3._First_results doc updated] for issue 19 InternalError "Can't connect to window server" on Mac OS X Server.
  * [UserGuide#14. doc updated] for usage of JavaMelody when SecurityManager is enabled
  * added: Statistics of rendering times in *JSP pages* (when RequestDispacher is used)
  * added: If *quartz* is available, display of mean time and last error with stack-trace per job for the selected period, and also display of the statistics for all the jobs with number of executions, mean cpu times, number of sql hits, sql times and last 100 errors with stack-traces for the selected period.
  * added: In Hudson plugin, if the server has servlet api 3.0 (JavaEE 6), then display the graphic of the number of http sessions and display the list of current http sessions
  * change: the graphics and the statistics of [UserGuide#8._Business_facades_(ejb-jar.xml_file_if_EJB3) ejb], [UserGuide#9._Business_facades_(if_Spring) spring] and [UserGuideAdvanced#Business_facades_(without_EJB3_and_without_Spring) services] will be displayed automatically when they are used (except if the parameter "displayed-counters" has been defined AND if the parameter does not include "ejb", "spring" or "services"). So usage of ejb, spring or services will be easier because it will not be necessary anymore to define the parameter "displayed-counters".
  * change to reduce disk usage: graphics for "http system errors" and "system errors logs" are no longer displayed (unneeded files will be automatically deleted at midnight)

=== 1.14.0 ===

  * fix: Use *spring datasources* in some parts of the reports, if of course the monitoring-spring.xml file (with the post-processor) is used as said in the [UserGuide#7._JDBC user guide]. Like with jndi datasources, database version and jdbc driver version will be displayed. And if system actions are enabled, reports on the database will be available (like mysql variables and process list, or oracle long requests).
  * fix issue 16: InternalError "Unable to open directory /proc/self/fd" on ubuntu or debian using the tomcat package with jsvc
  * fix in the javamelody plugin for atlassian (jira, bamboo, confluence): better aggregation of http URLs and less memory overhead in jira and in bamboo (the parameter "http-transform-pattern" has been changed in the atlassian plugin from "-\d+" to "-\d+|chment/.+|onent/.+|est/.+|ifact/.+" for attachment, component, test, artifact)
  * added with help from _Pether Sörling_: If *Logback* is available, warn logs are automatically monitored in order to display them in reports like with log4j and with java.util.logging, and Logback is used for log of http requests.
  * added: if system actions are enabled, display of stack traces of where were opened jdbc connections, in order to help *find jdbc connection leaks*

Atlassian JIRA and Bamboo plugin has been published on Atlassian plugin exchange: https://plugins.atlassian.com/plugin/details/20909

=== 1.13.0 ===

  * fix issue 14: html reports in utf-8 for cyrillic and other characters
  * fix issue 15: support for log4j-over-slf4j 
  * added: remember the last selected period (with a persistent cookie in the browser)
  * added: UI option to display graphs and statistics for *custom periods*, via fields of start and end dates of period to display (from user group)

=== 1.12.0 ===

  * if a centralized collect server is used:
    * fix issue 12: workaround for a bug in Winstone (standalone mode)
    * fix issue 13: NoClassDefFoundError with ehcache in the collect server if the monitored application uses ehcache
  * added: If Oracle database, display of *sql execution plan* in sql request detail (seems not doable if postgresql or mysql, without particular parameter values)
  * added: *New charts* "Threads count", "Loaded classes count", "Used non heap memory", "Used physical memory", "Used swap space" (displayed with the new link "Other charts")
  * added: spring post-processor in net/bull/javamelody/monitoring-spring.xml to auto-detect datasources defined in a spring xml file.
  * added: If quartz is available in classpath, display of the *list of the [http://www.quartz-scheduler.org/ quartz] jobs* with date and hour of previous execution, date and hour of next execution, duration of running jobs and buttons to pause and to resume all jobs or each job
  * added: Button to kill a java thread
  * added: New parameter {{{monitoring-path}}} to change the url "/monitoring" of the report to "/admin/monitoring" for example (from user group)

=== Atlassian JIRA plugin ===

A beta version of a JIRA plugin is released now to integrate JavaMelody in Atlassian JIRA.
See [UserGuide] for installation.

This plugin has been tested with a JIRA 4.0.1 server, but it certainly works with Confluence and Bamboo.

=== 1.11.1 ===

  * fix for AssertionError in sql counter when assertions are enabled (in maven surefire for example)
  * if a centralized collect server is used:
    * fix: after an action like GC is called do not execute the action again and again when the page is refreshed with the action parameter in the url
    * added: display of a message to say what was done after an action is called
  * added: in sql or spring or ejb request detail, link to display the reversed call-tree (i.e. usages) of the request
  * added: parameters can now be specified in environment variables like in system properties, webapp context or as init-param of MonitoringFilter
  * added: if postgresql, display of pg_locks, pg_tablespace, pg_database and of cachehitratio in pg_stat_database
  * added: if ehcache, an action is available to clear all caches of all cache managers
  * added: extraction of "maxActive" and other properties from apache dbcp BasicDataSource like what is already extracted from apache tomcat BasicDataSource (as discussed in user group)
  * added: new parameter "mail-periods" to change the period of mail reports from weekly to daily or monthly or a combination of the 3 (as suggested in user group)
  * added: display the version of JavaMelody at the bottom of the html and pdf reports (as suggested in user group)
  * added: [UserGuideAdvanced#Usage_of_in_JonAS_5_(which_uses_OSGI) documentation] to use JavaMelody in JonAS 5
  * added: display of "ajax GET" or "ajax POST" in http requests names for ajax requests
(same as of version 1.11.0 except for a java assertion which has no impact in general)

=== Grails Melody plugin ===

A Grails Melody plugin was released by Liu Chao at http://www.grails.org/plugin/grails-melody to integrate JavaMelody in Grails (Groovy on rails). 

=== 1.10.0 ===

  * fix: added automatic monitoring of jdbc datasources when their jndi names starts with java:/jdbc like when they starts with java:comp/env/jdbc (for jboss for example)
  * change: default language is now English. To help people outside US, UK and France: the language of the UI is always based on the language of the browser if a translation is found (just 'fr' for now), or now on the language of the java server if a translation is found, or to the default translation (that is now English). 
  * added: [UserGuideAdvanced documentation] to setup JavaMelody in an EAR file (based on a contribution by 'dhartford')
  * added: [DevGuide documentation] to import current development sources in eclipse
  * added: memory overhead estimated in reports

=== 1.9.0 ===

  * fix issue 3 "http status 500" : NoSuchElementException in getPID on Solaris 10
  * fix for use of JavaMelody in tomcat's lib directory without modification of monitored webapps (fix NullPointerException in dbcp datasource), [UserGuideAdvanced#Deployment_on_Tomcat_without_modification_of_monitored_webapps documentation] added
  * added: display of availability or unavailability of applications in the collect server
  * added: [UserGuideAdvanced documentation] for monitoring of services without ejb3 and without spring

=== 1.8.2 ===

  * fix ClassCastException for ehcache v1.2.1 to v1.2.4 (thanks hl)
  * fix: c:\... is now an absolute path for parameter "storage-directory" (and not relative to temp)
  * sql monitoring by jdbc datasource can now be disabled by an empty "datasources" parameter
  * added: display of deadlocks between threads if there are
This is the same version of JavaMelody as in the hudson plugin "[http://wiki.hudson-ci.org/display/HUDSON/Monitoring Monitoring]" available in [http://hudson-ci.org/ hudson].

=== 1.8.0 ===

  * fix for sql monitoring : the sql requests were monitored only in tomcat when a jdbc datasource was used. Fix tested with tomcat v5.5 & v6, glassfish v3, jboss v5, weblogic v11g, jetty v6, jonas v5
  * fix for container authentication on the report (thanks hasalex)


=== 1.7.0 ===

  Initial release on javamelody.googlecode.com